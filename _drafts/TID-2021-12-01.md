---
title: "TID"
excerpt: 

categories:
  - TID
tags: 
last_modified_at: 2021-12-01
---

# 코어 자바스크립트

1장 데이터 타입

JS의 데이터타입(primitive type) 7가지

###### 기본형
- number  
- string  
- boolean  
- null  
- undefined  
- symbol ( ES6 )  
  
###### 참조형  
- object (Array, Function, Date, RegExp...)  

JS의 숫자는 8바이트

JS의 데이터 할당 전략   
JS는 숫자가 8바이트? 그러면 문자열은...??    

```javascript
var a; // 선언
a = '1'; // 할당

var a = '1'; // 선언+할당을 한문장으로
```  

지금은 a만 있지만 10000개의 변수에 숫자 1 을 대입하고자 한다면?  
고정된 값으로 대입한다면 하나당 8바이트가 된다.  
그럼 8만바이트  

하지만  

주소값으로 값을 대입한다면?  
주소값의 크기가 2바이트면 
2만 바이트 + 주소값에 들어갈 1을 저장할 8바이트만 있으면된다.

이처럼 쓸데없는 공간 재할당을 위한 크기변환이나 감소를 위한 연산을 제거하고  
선언된 변수에 주소값만 재할당하면 된다.  

###### 변수와 상수와 불변성  
앞서 선언과 할당처럼 선언과 할당이 나뉘는데,   
메모리영역은   
선언한 변수를 관리할 변수 영역과  
할당한 데이터를 관리할 데이터 영역으로 나뉜다.  

  
변수와 상수를 구분짓는 변경 가능성 대상은 변수 영역  

불변성 여부를 구분짓는 변경 가능성 대상은 데이터 영역 메모리이다.  

결국 '기본형 데이터타입(primitive type)도 주솟값을 참조한다'  
는 사실은 일반적으론 소개하지 않는데 그 이유는 이해하기 어렵기 때문이라고 한다.  

###### 불변 객체
javascript는 기본형도 참조형으로 저장하고,
객체복사는 얕은복사가 기본이다.
<!-- 며칠전에 인덱스가 안잡힌 테이블에서 전체통계성 데이터를 조회하여
특정 column을 row로 변환하는 작업을 해줬다.
 -->
```js
var x = {a : '1', b : '2'}
var y = x
y.a = 'a'
y.c = 'c'
console.log(x) // {a: 'a', b: '2', c: 3}
```

주솟값을 참조하는 사실을 알고 처음부터 의도할 수도 있지만, 
그렇지 않을 때를 위해 불변객체를 만드는 규칙이나 함수를 만들어서 쓰는 것이 좋다.

원래 내가 주로 썼던 방식은 Object.assign({}, 복사할 원본) 인데,
이렇게 쓰면 깊은 복사는 지원하지 않는다.
그래서 깊은 복사를 지원하는 객체복사방법도 염두해둬야한다.
```js
var ctrlCVObject = function(obj){
  obj.
  return {}
}
```